{"ast":null,"code":"import _regeneratorRuntime from\"/home/mithun/nutritional_analysis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/mithun/nutritional_analysis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/mithun/nutritional_analysis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/mithun/nutritional_analysis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/mithun/nutritional_analysis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/mithun/nutritional_analysis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"./App.css\";import InputArea from\"../component/InputArea\";import\"bootstrap/dist/css/bootstrap.min.css\";import tachyons from\"tachyons\";import IngredientTable from\"../component/IngredientTable\";import NutritionTable from\"../component/NutritionTable\";import Navbar from\"../component/Navbar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.onChangeInput=function(e){_this.setState({input:e.target.value});};_this.onClickEvent=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var recipesNames,btnText;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.setState({allRecipes:[],recipes:[],nutritionData:[],recipeDataCollection:[],doFunc:false});case 2:_context.next=4;return _this.setState({recipes:_this.state.input.split(/[\\n,]+/),showContent:true,doFunc:true});case 4:if(!(_this.state.recipes.length===0)){_context.next=7;break;}_this.setState({error:true});return _context.abrupt(\"return\");case 7:recipesNames=_this.state.recipes.toString().replaceAll(\",\",\" \");btnText=e.target.innerText;if(!(btnText===\"New recipe\")){_context.next=12;break;}_this.setState({input:\"\",showContent:false,allRecipes:[],recipes:[],nutritionData:[],recipeDataCollection:[],doFunc:false});return _context.abrupt(\"return\");case 12:_this.fetchNinjaData(recipesNames);_this.fetchEdamamData(recipesNames);case 14:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.fetchEdamamData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(recipesNames){var app_id,app_key,edamamUrl;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:app_id=\"9845ad7d\";app_key=\"a883470ff6bcf615213622083d1dfc2d\";edamamUrl=\"https://api.edamam.com/api/nutrition-data?app_id=\".concat(app_id,\"&app_key=\").concat(app_key,\"&ingr=\").concat(recipesNames);_context2.next=5;return fetch(edamamUrl).then(function(resp){return resp.json();}).then(function(data){// console.log(data);\nif(data.calories===0){_this.setState({error:true});}_this.setState({nutritionData:_this.state.nutritionData.concat(data)});}).catch(function(e){_this.setState({nutritionData:[],doFunc:false,showContent:false});});case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.fetchNinjaData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(recipesNames){var url;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:url=\"https://api.calorieninjas.com/v1/nutrition?query=\";_context3.next=3;return fetch(url+recipesNames,{method:\"GET\",headers:{\"X-Api-Key\":\"sKREouRfX5u7A9RUZ5pFCA==SXe534ZR6mhdEtma\"}}).then(function(resp){return resp.json();}).then(function(data){_this.setState({recipeDataCollection:data.items});}).catch(function(e){_this.setState({allRecipes:[],doFunc:false,showContent:false,error:true});});case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();_this.combineData=function(){var allRecipes=[];var recipes=_this.state.recipes;var recipeDataCollection=_this.state.recipeDataCollection;for(var i=0;i<_this.state.recipes.length;i++){allRecipes[i]={id:i,item:recipes[i],nutritions:recipeDataCollection[i]};}_this.setState({allRecipes:allRecipes,doFunc:false});};_this.state={input:\"\",recipes:[],showContent:false,recipeDataCollection:[],allRecipes:[],nutritionData:[],doFunc:false,error:false};return _this;}_createClass(App,[{key:\"componentDidUpdate\",value:function componentDidUpdate(){if(this.state.doFunc&&this.state.recipeDataCollection.length){this.combineData();}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"tc container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tc\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"f1 fw7 h_color georgia\",children:\"Nutrition Analysis\"}),/*#__PURE__*/_jsx(\"h5\",{className:\"tc ph5 bg_faded\",children:'Enter an ingredient list for what you are cooking, like \"1 cup rice, 10 oz chickpeas\", etc. Enter each ingredient seperated with \",\" or on a new line.'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-wrap justify-content-around pt5\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(InputArea,{textInput:this.state.input,showContent:this.state.showContent,onChangeInput:this.onChangeInput,onClickEvent:this.onClickEvent}),this.state.showContent&&this.state.allRecipes.length===this.state.recipes.length&&this.state.recipes.length?/*#__PURE__*/_jsx(IngredientTable,{allRecipes:this.state.allRecipes}):\"\"]}),this.state.error?/*#__PURE__*/_jsx(\"h1\",{style:{color:\"blue\"},children:\"Invalid Input..Please text correct input as mentioned above \"}):\"\",this.state.showContent&&this.state.allRecipes.length===this.state.recipes.length&&this.state.recipes.length?/*#__PURE__*/_jsx(NutritionTable,{nutritionData:this.state.nutritionData}):\"\"]})]})]});}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/home/mithun/nutritional_analysis/src/container/App.js"],"names":["React","Component","InputArea","tachyons","IngredientTable","NutritionTable","Navbar","App","props","onChangeInput","e","setState","input","target","value","onClickEvent","allRecipes","recipes","nutritionData","recipeDataCollection","doFunc","state","split","showContent","length","error","recipesNames","toString","replaceAll","btnText","innerText","fetchNinjaData","fetchEdamamData","app_id","app_key","edamamUrl","fetch","then","resp","json","data","calories","concat","catch","url","method","headers","items","combineData","i","id","item","nutritions","color"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./App.css\";\nimport InputArea from \"../component/InputArea\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport tachyons from \"tachyons\";\nimport IngredientTable from \"../component/IngredientTable\";\nimport NutritionTable from \"../component/NutritionTable\";\nimport Navbar from \"../component/Navbar\";\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            input: \"\",\n            recipes: [],\n            showContent: false,\n            recipeDataCollection: [],\n            allRecipes: [],\n            nutritionData: [],\n            doFunc: false,\n            error: false,\n        };\n    }\n\n    componentDidUpdate() {\n        if (this.state.doFunc && this.state.recipeDataCollection.length) {\n            this.combineData();\n        }\n    }\n\n    onChangeInput = (e) => {\n        this.setState({ input: e.target.value });\n    };\n\n    onClickEvent = async (e) => {\n        await this.setState({ allRecipes: [], recipes: [], nutritionData: [], recipeDataCollection: [], doFunc: false });\n        await this.setState({ recipes: this.state.input.split(/[\\n,]+/), showContent: true, doFunc: true });\n        if (this.state.recipes.length === 0) {\n            this.setState({ error: true });\n            return;\n        }\n        let recipesNames = this.state.recipes.toString().replaceAll(\",\", \" \");\n\n        let btnText = e.target.innerText;\n        if (btnText === \"New recipe\") {\n            this.setState({ input: \"\", showContent: false, allRecipes: [], recipes: [], nutritionData: [], recipeDataCollection: [], doFunc: false });\n            return;\n        }\n        this.fetchNinjaData(recipesNames);\n        this.fetchEdamamData(recipesNames);\n    };\n\n    fetchEdamamData = async (recipesNames) => {\n        const app_id = \"9845ad7d\";\n        const app_key = \"a883470ff6bcf615213622083d1dfc2d\";\n        const edamamUrl = `https://api.edamam.com/api/nutrition-data?app_id=${app_id}&app_key=${app_key}&ingr=${recipesNames}`;\n        await fetch(edamamUrl)\n            .then((resp) => resp.json())\n            .then((data) => {\n                // console.log(data);\n                if (data.calories === 0) {\n                    this.setState({ error: true });\n                }\n                this.setState({ nutritionData: this.state.nutritionData.concat(data) });\n            })\n            .catch((e) => {\n                this.setState({ nutritionData: [], doFunc: false, showContent: false });\n            });\n    };\n\n    fetchNinjaData = async (recipesNames) => {\n        const url = `https://api.calorieninjas.com/v1/nutrition?query=`;\n\n        await fetch(url + recipesNames, {\n            method: \"GET\",\n            headers: {\n                \"X-Api-Key\": \"sKREouRfX5u7A9RUZ5pFCA==SXe534ZR6mhdEtma\",\n            },\n        })\n            .then((resp) => resp.json())\n            .then((data) => {\n                this.setState({ recipeDataCollection: data.items });\n            })\n            .catch((e) => {\n                this.setState({ allRecipes: [], doFunc: false, showContent: false, error: true });\n            });\n    };\n\n    combineData = () => {\n        let allRecipes = [];\n        let recipes = this.state.recipes;\n        let recipeDataCollection = this.state.recipeDataCollection;\n        for (let i = 0; i < this.state.recipes.length; i++) {\n            allRecipes[i] = {\n                id: i,\n                item: recipes[i],\n                nutritions: recipeDataCollection[i],\n            };\n        }\n        this.setState({ allRecipes: allRecipes, doFunc: false });\n    };\n\n    render() {\n        return (\n            <div>\n                <Navbar />\n                <div className=\"tc container\">\n                    <div className=\"tc\">\n                        <h1 className=\"f1 fw7 h_color georgia\">{\"Nutrition Analysis\"}</h1>\n                        <h5 className=\"tc ph5 bg_faded\">{'Enter an ingredient list for what you are cooking, like \"1 cup rice, 10 oz chickpeas\", etc. Enter each ingredient seperated with \",\" or on a new line.'}</h5>\n                    </div>\n                    <div className=\"d-flex flex-wrap justify-content-around pt5\">\n                        <div>\n                            <InputArea textInput={this.state.input} showContent={this.state.showContent} onChangeInput={this.onChangeInput} onClickEvent={this.onClickEvent} />\n\n                            {this.state.showContent && this.state.allRecipes.length === this.state.recipes.length && this.state.recipes.length ? <IngredientTable allRecipes={this.state.allRecipes} /> : \"\"}\n                        </div>\n                        {this.state.error ? <h1 style={{color:\"blue\"}}>{\"Invalid Input..Please text correct input as mentioned above \"}</h1> : \"\"}\n                        {this.state.showContent && this.state.allRecipes.length === this.state.recipes.length && this.state.recipes.length ? <NutritionTable nutritionData={this.state.nutritionData} /> : \"\"}\n                    </div>\n                </div>\n            \n            </div>\n        );\n    }\n}\n\nexport default App;\n\n"]},"metadata":{},"sourceType":"module"}